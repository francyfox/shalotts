# Rust-specific lldb configuration for Shalotts project

# Load Rust pretty-printers
command script import ~/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/etc/lldb_lookup.py
command source -s 0 ~/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/etc/lldb_commands

# Common breakpoints for sha-cli
# breakpoint set --name main
# breakpoint set --file src/main.rs --line 10

# Settings
settings set target.process.stop-on-exec false
settings set target.x86-disassembly-flavor intel

# Aliases for convenience
command alias bd breakpoint disable
command alias be breakpoint enable
command alias bl breakpoint list
command alias bp breakpoint set

# Print formatting
settings set frame-format frame #${frame.index}: ${frame.pc}{ ${module.file.basename}\`${function.name}{${function.pc-offset}}}{ at ${line.file.basename}:${line.number}}{${function.is-optimized} [opt]}\n

# Auto-confirm quit
settings set auto-confirm true
